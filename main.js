(()=>{"use strict";let e=0,t=4;function a(a){let s=[];const n=localStorage.getItem("projectId");n?t=JSON.parse(n):localStorage.setItem("projectId",JSON.stringify(t));let r=null;r="All tasks"==a?0:"today"==a?1:"This week"==a?2:"important"==a?3:t,localStorage.setItem("projectId",JSON.stringify(t));const i=localStorage.getItem("taskId");return i&&(e=JSON.parse(i)),function(){const e=localStorage.getItem(`taskarray_${r}`);e&&(s=JSON.parse(e))}(),{id:r,title:a,taskarray:s,taskID:function(){e++,localStorage.setItem("taskId",JSON.stringify(e))},addTask:function(t){s.push(t),console.log("addTaskteki task array",s,r),t.id=e,localStorage.setItem(`taskarray_${a}`,JSON.stringify(s))},deleteTask:function(e){const t=s.indexOf(e);s.splice(t,1),localStorage.setItem(`taskarray_${a}}`,JSON.stringify(s))},projectID:function(){t++,localStorage.setItem("projectId",JSON.stringify(t))}}}function s(e){let t=document.querySelector("table");e.id;const a=localStorage.getItem(`taskarray_${e.title}`);a&&(e.taskarray=JSON.parse(a),console.log("displaytasksteki task array",`taskarray_${e.title}`,e.taskarray,e));for(let a=t.rows.length;a<e.taskarray.length;a++){let s=t.insertRow(a);s.setAttribute("data-index",e.taskarray[a].id),s.classList.add("row"),s.insertCell(0).innerHTML='\n        <label for="accept">\n            <input type="checkbox" class="check" name="check"></input>\n        </label>';let n=s.insertCell(1);n.innerHTML=e.taskarray[a].title,n.classList.add("tb");let r=s.insertCell(2);r.innerHTML=e.taskarray[a].importance,r.classList.add("importance"),"High"==e.taskarray[a].importance?r.classList.add("task-high"):"Medium"==e.taskarray[a].importance?r.classList.add("task-medium"):"Low"==e.taskarray[a].importance&&r.classList.add("task-low");let i=s.insertCell(3);i.innerHTML=e.taskarray[a].dueDate,i.classList.add("cell");let l=document.createElement("img");l.classList.add("details"),l.src="images/file.png";let o=s.insertCell();o.appendChild(l),o.classList.add("cell");let c=document.createElement("img");c.classList.add("edit-button"),c.src="images/edit.png";let d=s.insertCell();d.appendChild(c),d.classList.add("cell");let u=document.createElement("img");u.src="images/bin.png",u.classList.add("delete-button");let m=s.insertCell();m.appendChild(u),m.classList.add("cell"),t.querySelectorAll(".check").forEach((e=>{e.addEventListener("change",(function(){let t=this.closest(".row").querySelector(".tb"),a=this.closest(".row");e.checked?(t.classList.add("crossed-out","slanted"),a.classList.add("opacity")):(t.classList.remove("crossed-out","slanted"),a.classList.remove("opacity"))}))}))}}const n=document.querySelector(".project-list");function r(e){for(let t=document.querySelectorAll(".project-list div").length;t<e.length;t++){let a=document.createElement("div");a.innerText=e[t].title,a.classList.add("project_element"),a.setAttribute("data-index",e[t].id),n.appendChild(a);let s=document.createElement("img");s.src="images/bin.png",s.classList.add("delete-button-project"),a.appendChild(s)}}function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===l(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function c(e){i(1,arguments);var t=o(e);return t.setHours(0,0,0,0),t}function d(e){return i(1,arguments),function(e,t){i(2,arguments);var a=c(e),s=c(t);return a.getTime()===s.getTime()}(e,Date.now())}var u={};function m(){return u}function p(e,t){var a,s,n,r,l,c,d,u;i(1,arguments);var p=m(),y=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(a=null!==(s=null!==(n=null!==(r=null==t?void 0:t.weekStartsOn)&&void 0!==r?r:null==t||null===(l=t.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:p.weekStartsOn)&&void 0!==s?s:null===(d=p.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=o(e),g=k.getDay(),v=(g<y?7:0)+g-y;return k.setDate(k.getDate()-v),k.setHours(0,0,0,0),k}function y(e,t){return i(1,arguments),function(e,t,a){i(2,arguments);var s=p(e,a),n=p(t,a);return s.getTime()===n.getTime()}(e,Date.now(),t)}const k=document.querySelector(".open_menu"),g=document.querySelector(".menu"),v=document.querySelector(".main-place");k.addEventListener("click",(()=>{g.classList.toggle("open"),v.classList.toggle("open")})),function(){const e=document.querySelector(".content"),t=document.querySelector(".create-project");t.classList.add("addPage");const n=document.querySelector(".modal-project"),i=document.querySelector(".project-list"),l=document.querySelector(".close-modal-task"),c=document.querySelector(".close-modal-project"),u=document.querySelector(".main-place"),m=document.querySelector(".default"),p=document.querySelector(".form-project"),k=document.querySelector(".modal-task"),g=document.querySelector(".form-task"),v=document.querySelector("table");let f=document.createElement("div"),L=document.createElement("div");L.classList.add("project-header-place");const S=document.createElement("button"),b=document.querySelector(".pop-up-place");S.innerText="+",S.classList.add("addPage"),S.classList.add("addTaskButton"),f.appendChild(L),f.appendChild(S),f.classList.add("header-and-button"),u.appendChild(f),S.style.visibility="hidden",u.appendChild(v);let T=" ",h=!1;const I=document.querySelector(".add"),E=document.querySelector("#allTasks"),w=document.querySelector(".today"),N=document.querySelector(".thisWeek"),q=document.querySelector(".important");E.classList.add("active");let D=!1;const O=a("All tasks"),j=a("today"),H=a("This week"),M=a("important");let _=[],J=O;const A=localStorage.getItem("projectArray");function x(){n.style.display="none",p.reset(),e.classList.remove("blur")}function C(){k.style.display="none",e.classList.remove("blur"),g.reset(),h=!1}A&&(_=JSON.parse(A),_.forEach((e=>{const{id:t,title:s,taskarray:n}=e;t===J.id&&(J=e);const r=a(s);r.id=t,r.taskarray=n,e.addTask=r.addTask.bind(e),e.taskID=r.taskID,e.deleteTask=r.deleteTask.bind(e)}))),r(_),s(O),L.innerHTML="All Tasks",S.style.visibility="visible",m.addEventListener("click",(function(e){e.target.classList.contains("all")&&(L.innerHTML=" ",v.innerHTML=" ",S.style.visibility="visible",e.target==E||e.target.parentElement==E?(s(O),document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),E.classList.add("active"),L.innerHTML="All Tasks",J=O):e.target==w||e.target.parentElement==w?(s(j),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),w.classList.add("active"),L.innerHTML="Today",J=j):e.target==N||e.target.parentElement==N?(s(H),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),N.classList.add("active"),L.innerHTML="This week",J=H):e.target!=q&&e.target.parentElement!=q||(s(M),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),q.classList.add("active"),L.innerHTML="Important",J=M))})),t.addEventListener("click",(()=>{n.style.display="block",e.classList.add("blur")})),c.addEventListener("click",x),n.addEventListener("submit",(e=>{e.preventDefault();const t=a(document.getElementById("title").value);_.push(t),localStorage.setItem("projectArray",JSON.stringify(_)),r(_),t.projectID(),x()})),i.addEventListener("click",(function(e){if(e.target.classList.contains("delete-button-project")){const t=e.target.parentNode.getAttribute("data-index"),a=_.find((e=>e.id==t)),n=_.indexOf(a);for(let e=0;e<a.taskarray.length;e++){const s=localStorage.getItem(`taskarray_${t}`);s&&(a.taskarray=JSON.parse(s));let n=a.taskarray[e];O.deleteTask(n),j.deleteTask(n),H.deleteTask(n),M.deleteTask(n),localStorage.setItem("taskarray_All tasks",JSON.stringify(O.taskarray)),localStorage.setItem("taskarray_today",JSON.stringify(j.taskarray)),localStorage.setItem("taskarray_This week",JSON.stringify(H.taskarray)),localStorage.setItem("taskarray_important",JSON.stringify(M.taskarray))}J==a&&(L.innerHTML=" ",v.innerHTML=" ",L.innerHTML="All Tasks",J=O,E.classList.add("active"),s(J)),_.splice(n,1),e.target.parentNode.remove(),localStorage.setItem("projectArray",JSON.stringify(_))}else if(e.target.classList.contains("project_element")){const t=e.target.getAttribute("data-index");L.innerHTML=" ",v.innerHTML=" ",document.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),J=_.find((e=>e.id==t)),L.innerText=J.title,S.style.visibility="visible",s(J)}})),S.addEventListener("click",(()=>{k.style.display="block",e.classList.add("blur")})),l.addEventListener("click",C),I.addEventListener("click",(e=>{if(e.preventDefault(),0==h){1==D&&I.removeEventListener("click",B);let e=document.getElementById("name").value,t=document.getElementById("description").value,a=document.getElementById("due-date").value,n=document.querySelector('input[name="importance"]:checked').value;const r={title:e,description:t,dueDate:a,importance:n,project:J.title,completed:!1};J.addTask(r),console.log("current project task array when click to submit button",J),J!==O&&O.addTask(r);let i=o(new Date(a));d(i)&&j.addTask(r),y(i)&&H.addTask(r),"High"==n&&M.addTask(r),J.taskID(),C(),s(J)}}));let $=document.createElement("div");function B(){let t=T.importance,a=o(new Date(T.dueDate));T.title=document.getElementById("name").value,T.description=document.getElementById("description").value,T.dueDate=document.getElementById("due-date").value,T.importance=document.querySelector('input[name="importance"]:checked').value;const s=J.taskarray.findIndex((e=>e.id==R));v.rows[s].cells[1].innerHTML=T.title,v.rows[s].cells[2].innerHTML=T.importance,v.rows[s].cells[3].innerHTML=T.dueDate;let n=o(new Date(T.dueDate));d(a)&&0==d(n)&&j.deleteTask(T),y(a)&&0==y(n)&&H.deleteTask(T),0==d(a)&&d(n)&&j.addTask(T),0==y(a)&&y(n)&&H.addTask(T),"High"==t&"High"!=T.importance&&M.deleteTask(T),"High"!=t&"High"==T.importance&&M.addTask(T);const r=v.rows[s].cells[2],i=r.classList;if(i.length>0){const e=i[i.length-1];r.classList.remove(e)}"High"==T.importance?r.classList.add("task-high"):"Medium"==T.importance?r.classList.add("task-medium"):"Low"==T.importance&&r.classList.add("task-low");const l=O.taskarray.findIndex((e=>e.id==T.id));O.taskarray[l]=T;const c=j.taskarray.findIndex((e=>e.id==T.id));-1!==c&&(j.taskarray[c]=T);const u=H.taskarray.findIndex((e=>e.id==T.id));-1!==u&&(H.taskarray[u]=T);const m=M.taskarray.findIndex((e=>e.id==T.id));-1!==m&&(M.taskarray[m]=T),localStorage.setItem(`taskarray_${J.title}`,JSON.stringify(J.taskarray)),localStorage.setItem("taskarray_All tasks",JSON.stringify(O.taskarray)),localStorage.setItem("taskarray_today",JSON.stringify(j.taskarray)),localStorage.setItem("taskarray_This week",JSON.stringify(H.taskarray)),localStorage.setItem("taskarray_important",JSON.stringify(M.taskarray)),T.id=R,I.removeEventListener("click",P),e.classList.remove("blur"),h=!1,C()}$.classList.add="pop-up",b.appendChild($),$.style.display="none",document.addEventListener("click",(function(t){if(t.target.classList.contains("popup__close")&&($.style.display="none",e.classList.remove("blur")),t.target.classList.contains("details")){const a=t.target.parentNode.parentNode.getAttribute("data-index");T=J.taskarray.find((e=>e.id==a)),function(t){$.style.display="block",e.classList.add("blur"),$.innerHTML=`\n         <div class="pop-up-div">\n            <div class="popup__close">X</div>\n            <div class="popup__content">\n            \t<div class="popup title">${t.title}</div>\n                <div class="popup details"><span>Project: </span>${t.project}</div>\n            \t<div class="popup priority"><span>Priority: </span>${t.importance}</div>\n            \t<div class="popup due"><span>Due Date: </span>${t.dueDate}</div>\n            \t<div class="popup details"><span>Description: </span>${t.description}</div>\n            </div>\n        </div>\n         `}(T)}}));let P=null,R=" ";v.addEventListener("click",(t=>{t.target.classList.contains("edit-button")&&(e.classList.add("blur"),h=!0,k.style.display="block",R=t.target.parentNode.parentNode.getAttribute("data-index"),T=J.taskarray.find((e=>e.id==R)),document.getElementById("name").value=T.title,document.getElementById("description").value=T.description,document.getElementById("due-date").value=T.dueDate,"High"==T.importance?document.formTask.importance[0].checked=!0:"Medium"==T.importance?document.formTask.importance[1].checked=!0:document.formTask.importance[2].checked=!0,P&&I.removeEventListener("click",P),P=()=>{B()},I.addEventListener("click",P),D=!0)})),v.addEventListener("click",(e=>{if(e.target.classList.contains("delete-button")){const t=e.target.parentNode.parentNode.getAttribute("data-index");T=J.taskarray.find((e=>e.id==t)),J.deleteTask(T),J!=O&&O.deleteTask(T),J!=j&&j.deleteTask(T),J!=H&&H.deleteTask(T),J!=M&&M.deleteTask(T),e.target.parentNode.parentNode.remove(),T=null}}))}()})();