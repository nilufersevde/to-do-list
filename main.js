(()=>{"use strict";let e=0,t=4;function a(a){let n=[];const s=localStorage.getItem("projectId");s?t=JSON.parse(s):localStorage.setItem("projectId",JSON.stringify(t));let i=null;"All tasks"==a?i=0:"today"==a?i=1:"This week"==a?i=2:"important"==a?i=3:(i=t,localStorage.setItem("projectId",JSON.stringify(t)));const r=localStorage.getItem("taskId");r&&(e=JSON.parse(r));const l=localStorage.getItem(`taskarray_${i}`);return l&&(n=JSON.parse(l)),{id:i,title:a,taskarray:n,taskID:function(){e++,localStorage.setItem("taskId",JSON.stringify(e))},addTask:function(a){i=t,n.push(a),a.id=e,localStorage.setItem(`taskarray_${i}`,JSON.stringify(n))},deleteTask:function(e){i=t;const a=n.indexOf(e);n.splice(a,1),localStorage.setItem(`taskarray_${i}`,JSON.stringify(n))},projectID:function(){t++,localStorage.setItem("projectId",JSON.stringify(t))}}}function n(e){let t=document.querySelector("table"),a=e.id;const n=localStorage.getItem(`taskarray_${a}`);n&&(e.taskarray=JSON.parse(n));for(let a=t.rows.length;a<e.taskarray.length;a++){let n=t.insertRow(a);n.setAttribute("data-index",e.taskarray[a].id),console.log(e.taskarray[a].id),n.classList.add("row"),n.insertCell(0).innerHTML='\n        <label for="accept">\n            <input type="checkbox" class="check" name="check"></input>\n        </label>';let s=n.insertCell(1);s.innerHTML=e.taskarray[a].title,s.classList.add("tb");let i=n.insertCell(2);i.innerHTML=e.taskarray[a].importance,i.classList.add("importance"),"High"==e.taskarray[a].importance?i.classList.add("task-high"):"Medium"==e.taskarray[a].importance?i.classList.add("task-medium"):"Low"==e.taskarray[a].importance&&i.classList.add("task-low");let r=n.insertCell(3);r.innerHTML=e.taskarray[a].dueDate,r.classList.add("cell");let l=document.createElement("img");l.classList.add("details"),l.src="images/file.png";let c=n.insertCell();c.appendChild(l),c.classList.add("cell");let o=document.createElement("img");o.classList.add("edit-button"),o.src="images/edit.png";let d=n.insertCell();d.appendChild(o),d.classList.add("cell");let u=document.createElement("img");u.src="images/bin.png",u.classList.add("delete-button");let m=n.insertCell();m.appendChild(u),m.classList.add("cell"),t.querySelectorAll(".check").forEach((e=>{e.addEventListener("change",(function(){let t=this.closest(".row").querySelector(".tb"),a=this.closest(".row");e.checked?(t.classList.add("crossed-out","slanted"),a.classList.add("opacity")):(t.classList.remove("crossed-out","slanted"),a.classList.remove("opacity"))}))}))}}const s=document.querySelector(".project-list");function i(e){for(let t=document.querySelectorAll(".project-list div").length;t<e.length;t++){let a=document.createElement("div");a.innerText=e[t].title,a.classList.add("project_element"),a.setAttribute("data-index",t+4),s.appendChild(a);let n=document.createElement("img");n.src="images/bin.png",n.classList.add("delete-button-project"),a.appendChild(n)}}function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e){r(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===l(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function o(e){r(1,arguments);var t=c(e);return t.setHours(0,0,0,0),t}function d(e){return r(1,arguments),function(e,t){r(2,arguments);var a=o(e),n=o(t);return a.getTime()===n.getTime()}(e,Date.now())}var u={};function m(){return u}function p(e,t){var a,n,s,i,l,o,d,u;r(1,arguments);var p=m(),y=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(a=null!==(n=null!==(s=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(l=t.locale)||void 0===l||null===(o=l.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==s?s:p.weekStartsOn)&&void 0!==n?n:null===(d=p.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=c(e),v=g.getDay(),k=(v<y?7:0)+v-y;return g.setDate(g.getDate()-k),g.setHours(0,0,0,0),g}function y(e,t){return r(1,arguments),function(e,t,a){r(2,arguments);var n=p(e,a),s=p(t,a);return n.getTime()===s.getTime()}(e,Date.now(),t)}const g=document.querySelector(".open_menu"),v=document.querySelector(".menu"),k=document.querySelector(".main-place");g.addEventListener("click",(()=>{v.classList.toggle("open"),k.classList.toggle("open")})),function(){const e=document.querySelector(".content"),t=document.querySelector(".create-project");t.classList.add("addPage");const s=document.querySelector(".modal-project"),r=document.querySelector(".project-list"),l=document.querySelector(".close-modal-task"),o=document.querySelector(".close-modal-project"),u=document.querySelector(".main-place"),m=document.querySelector(".default"),p=document.querySelector(".form-project"),g=document.querySelector(".modal-task"),v=document.querySelector(".form-task"),k=document.querySelector("table");let L=document.createElement("div"),f=document.createElement("div");f.classList.add("project-header-place");const S=document.createElement("button"),b=document.querySelector(".pop-up-place");S.innerText="+",S.classList.add("addPage"),S.classList.add("addTaskButton"),L.appendChild(f),L.appendChild(S),L.classList.add("header-and-button"),u.appendChild(L),S.style.visibility="hidden",u.appendChild(k);let T=" ",h=!1;const E=document.querySelector(".add"),q=document.querySelector("#allTasks"),w=document.querySelector(".today"),I=document.querySelector(".thisWeek"),D=document.querySelector(".important");q.classList.add("active");let N=!1;const H=a("All tasks"),j=a("today"),M=a("This week"),O=a("important");let C=[],A=H;const x=localStorage.getItem("projectArray");function J(){s.style.display="none",p.reset(),e.classList.remove("blur")}function _(){g.style.display="none",e.classList.remove("blur"),v.reset(),h=!1}x&&(C=JSON.parse(x),C.forEach((e=>{const{id:t,title:n,taskarray:s}=e,i=a(n);i.id=t,i.taskarray=s,e.addTask=i.addTask,e.taskID=i.taskID,e.deleteTask=i.deleteTask}))),i(C),n(H),f.innerHTML="All Tasks",S.style.visibility="visible",m.addEventListener("click",(function(e){e.target.classList.contains("all")&&(f.innerHTML=" ",k.innerHTML=" ",S.style.visibility="visible",e.target==q||e.target.parentElement==q?(n(H),document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),q.classList.add("active"),f.innerHTML="All Tasks",A=H):e.target==w||e.target.parentElement==w?(n(j),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),w.classList.add("active"),f.innerHTML="Today",A=j):e.target==I||e.target.parentElement==I?(n(M),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),I.classList.add("active"),f.innerHTML="This week",A=M):e.target!=D&&e.target.parentElement!=D||(n(O),S.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),D.classList.add("active"),f.innerHTML="Important",A=O))})),t.addEventListener("click",(()=>{s.style.display="block",e.classList.add("blur")})),o.addEventListener("click",J),s.addEventListener("submit",(e=>{e.preventDefault();const t=a(document.getElementById("title").value);C.push(t),localStorage.setItem("projectArray",JSON.stringify(C)),i(C),t.projectID(),J()})),r.addEventListener("click",(function(e){if(e.target.classList.contains("delete-button-project")){const t=e.target.parentNode.getAttribute("data-index"),a=C.find((e=>e.id==t)),s=C.indexOf(a);for(let e=0;e<a.taskarray.length;e++){const t=localStorage.getItem("taskarray");t&&(taskarray=JSON.parse(t));let n=a.taskarray[e];H.deleteTask(n),j.deleteTask(n),M.deleteTask(n),O.deleteTask(n)}A==a&&(f.innerHTML=" ",k.innerHTML=" ",f.innerHTML="All Tasks",A=H,q.classList.add("active"),n(A)),C.splice(s,1),e.target.parentNode.remove()}else if(e.target.classList.contains("project_element")){const t=e.target.getAttribute("data-index");f.innerHTML=" ",k.innerHTML=" ",document.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),A=C.find((e=>e.id==t)),console.log(C),f.innerText=A.title,S.style.visibility="visible",n(A)}})),S.addEventListener("click",(()=>{g.style.display="block",e.classList.add("blur")})),l.addEventListener("click",_),E.addEventListener("click",(e=>{if(e.preventDefault(),0==h){1==N&&E.removeEventListener("click",$);let e=document.getElementById("name").value,t=document.getElementById("description").value,a=document.getElementById("due-date").value,s=document.querySelector('input[name="importance"]:checked').value;const i={title:e,description:t,dueDate:a,importance:s,project:A.title,completed:!1};A.addTask(i),A!==H&&H.addTask(i);let r=c(new Date(a));d(r)&&j.addTask(i),y(r)&&M.addTask(i),"High"==s&&O.addTask(i),console.log(A.taskarray),A.taskID(),_(),n(A)}}));let B=document.createElement("div");function $(){let t=T.importance,a=c(new Date(T.dueDate));T.title=document.getElementById("name").value,T.description=document.getElementById("description").value,T.dueDate=document.getElementById("due-date").value,T.importance=document.querySelector('input[name="importance"]:checked').value;const n=A.taskarray.findIndex((e=>e.id==R));k.rows[n].cells[1].innerHTML=T.title,k.rows[n].cells[2].innerHTML=T.importance,k.rows[n].cells[3].innerHTML=T.dueDate;let s=c(new Date(T.dueDate));d(a)&&0==d(s)&&j.deleteTask(T),y(a)&&0==y(s)&&M.deleteTask(T),0==d(a)&&d(s)&&j.addTask(T),0==y(a)&&y(s)&&M.addTask(T),"High"==t&"High"!=T.importance&&O.deleteTask(T),"High"!=t&"High"==T.importance&&O.addTask(T);const i=k.rows[n].cells[2],r=i.classList;if(r.length>0){const e=r[r.length-1];i.classList.remove(e)}"High"==T.importance?i.classList.add("task-high"):"Medium"==T.importance?i.classList.add("task-medium"):"Low"==T.importance&&i.classList.add("task-low"),T.id=R,E.removeEventListener("click",P),e.classList.remove("blur"),h=!1,_()}B.classList.add="pop-up",b.appendChild(B),B.style.display="none",document.addEventListener("click",(function(t){if(t.target.classList.contains("popup__close")&&(B.style.display="none",e.classList.remove("blur")),t.target.classList.contains("details")){const a=t.target.parentNode.parentNode.getAttribute("data-index");T=A.taskarray.find((e=>e.id==a)),function(t){B.style.display="block",e.classList.add("blur"),B.innerHTML=`\n         <div class="pop-up-div">\n            <div class="popup__close">X</div>\n            <div class="popup__content">\n            \t<div class="popup title">${t.title}</div>\n                <div class="popup details"><span>Project: </span>${t.project}</div>\n            \t<div class="popup priority"><span>Priority: </span>${t.importance}</div>\n            \t<div class="popup due"><span>Due Date: </span>${t.dueDate}</div>\n            \t<div class="popup details"><span>Description: </span>${t.description}</div>\n            </div>\n        </div>\n         `}(T)}}));let P=null,R=" ";k.addEventListener("click",(t=>{t.target.classList.contains("edit-button")&&(e.classList.add("blur"),h=!0,g.style.display="block",R=t.target.parentNode.parentNode.getAttribute("data-index"),T=A.taskarray.find((e=>e.id==R)),document.getElementById("name").value=T.title,document.getElementById("description").value=T.description,document.getElementById("due-date").value=T.dueDate,"High"==T.importance?document.formTask.importance[0].checked=!0:"Medium"==T.importance?document.formTask.importance[1].checked=!0:document.formTask.importance[2].checked=!0,P&&E.removeEventListener("click",P),P=()=>{$()},E.addEventListener("click",P),N=!0)})),k.addEventListener("click",(e=>{if(e.target.classList.contains("delete-button")){const t=e.target.parentNode.parentNode.getAttribute("data-index");T=A.taskarray.find((e=>e.id==t)),A.deleteTask(T),A!=H&&H.deleteTask(T),A!=j&&j.deleteTask(T),A!=M&&M.deleteTask(T),A!=O&&O.deleteTask(T),e.target.parentNode.parentNode.remove(),T=null}}))}()})();