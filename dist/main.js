(()=>{"use strict";function e(e){const t=[];return{title:e,taskarray:t,addTask:function(e,n,i,l){t.push(function(e,t,n,i){return{title:e,description:t,dueDate:n,importance:i,setImportance:function(e){this.importance=e}}}(e,n,i,l))},deleteTask:function(e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}}}function t(e){let t=document.querySelector("table");document.querySelector(".main-place");for(let n=t.rows.length;n<e.taskarray.length;n++){let i=t.insertRow(n);i.setAttribute("data-index",n),i.classList.add("row");let l=document.createElement("button");l.innerText="X",l.classList.add("delete-button"),i.insertCell(0).appendChild(l);let s=i.insertCell(1);s.innerHTML=e.taskarray[n].title,s.classList.add("tb");let a=i.insertCell(2);a.innerHTML=e.taskarray[n].importance,a.classList.add("tb");let d=i.insertCell(3);d.innerHTML=e.taskarray[n].dueDate,d.classList.add("tb");let c=document.createElement("button");c.innerText="Details",c.classList.add("details"),i.insertCell().appendChild(c);let r=document.createElement("button");r.innerText="edit",r.classList.add("edit"),i.insertCell().appendChild(r);let o=document.createElement("button");o.innerText="X",o.classList.add("delete-button"),i.insertCell().appendChild(o)}}const n=document.querySelector(".project-list");function i(e){for(let t=document.querySelectorAll(".project-list div").length;t<e.length;t++){let i=document.createElement("div");i.innerText=e[t].title,i.classList.add("project_element"),i.setAttribute("data-index",t),n.appendChild(i);let l=document.createElement("button");l.innerText="X",l.classList.add("delete_button"),i.appendChild(l)}}!function(){const n=document.querySelector(".create-project"),l=document.querySelector(".modal-project"),s=document.querySelector(".project-list"),a=document.querySelector(".close-modal-task"),d=document.querySelector(".close-modal-project"),c=document.querySelector(".main-place"),r=document.querySelector(".default"),o=document.querySelector(".form-project"),u=document.querySelector(".modal-task"),p=document.querySelector(".form-task"),m=document.querySelector("table"),y=document.createElement("div"),v=document.createElement("button");v.innerText="+",c.appendChild(y),c.appendChild(v),v.style.visibility="hidden",c.appendChild(m);let b=" ";const L=e("All tasks"),f=e("today"),T=e("This week"),g=e("important"),k=[];let _=L;i(k),t(_),y.innerHTML="All Tasks",v.style.visibility="visible",r.addEventListener("click",(function(e){e.target.classList.contains("default-project")&&(y.innerHTML=" ",y.innerHTML=e.target.innerText,m.innerHTML=" ",v.style.visibility="visible","allTasks"==e.target.id?t(L):"today"==e.target.id?t(f):"thisWeek"==e.target.id?t(T):t(g))}));let h=document.createElement("div");function E(){l.style.visibility="hidden",o.reset()}function x(){u.style.visibility="hidden",p.reset()}h.classList.add="pop-up",c.appendChild(h),h.style.visibility="hidden",document.addEventListener("click",(function(e){e.target.classList.contains("popup__close")&&(h.style.visibility="hidden")})),m.addEventListener("click",(function(e){if(e.target.classList.contains("details")){const t=e.target.parentNode.parentNode.getAttribute("data-index");b=_.taskarray[t],function(e){h.style.visibility="visible",h.innerHTML=`\n         <div class="popup">\n            <div class="popup__close">X</div>\n            <div class="popup__content">\n            \t<div class="popup__title">${e.title}</div>\n            \t<div class="popup__priority"><span class="popup__catagory">Priority:</span>${e.importance}</div>\n            \t<div class="popup__due"><span class="popup__catagory">Due Date:</span>${e.dueDate}</div>\n            \t<div class="__details"><span class="popup__details">Details: </span><span class="details-popup__details-text">${e.description}</span></div>\n            </div>\n        </div>\n         `}(b)}})),n.addEventListener("click",(()=>{l.style.visibility="visible"})),d.addEventListener("click",E),l.addEventListener("submit",(t=>{t.preventDefault();const n=e(document.getElementById("title").value);k.push(n),n.id=k.indexOf(n),i(k),E()})),s.addEventListener("click",(function(e){if(e.target.classList.contains("delete_button")){const n=e.target.parentNode,i=n.getAttribute("data-index"),l=k.find((e=>e.id==i)),s=k.indexOf(l);_==l&&(y.innerHTML=" ",m.innerHTML=" ",y.innerHTML="All Tasks",_=L,t(_)),k.splice(s,1),n.remove()}else if(e.target.classList.contains("project_element")){const n=e.target.getAttribute("data-index");console.log(n),y.innerHTML=" ",m.innerHTML=" ",_=k.find((e=>e.id==n)),console.log(_),y.innerText=_.title,v.style.visibility="visible",t(_)}})),v.addEventListener("click",(()=>{u.style.visibility="visible"})),a.addEventListener("click",x),u.addEventListener("submit",(e=>{e.preventDefault();let n=document.getElementById("name").value,i=document.getElementById("description").value,l=document.getElementById("due-date").value,s=document.getElementById("importance").value;_.addTask(n,i,l,s),x(),t(_)}))}()})();