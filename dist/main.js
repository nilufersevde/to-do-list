(()=>{"use strict";let e=0;function t(t){const n=[];return{title:t,taskarray:n,taskID:function(t){e++},addTask:function(t){n.push(t),t.id=e},deleteTask:function(e){const t=n.indexOf(e);n.splice(t,1)}}}function n(e){let t=document.querySelector("table");for(let n=t.rows.length;n<e.taskarray.length;n++){let a=t.insertRow(n);a.setAttribute("data-index",e.taskarray[n].id),console.log(e.taskarray[n].id),a.classList.add("row"),a.insertCell(0).innerHTML='\n        <label for="accept">\n            <input type="checkbox" id="check" name="check" value="yes"></input>\n        </label>';let i=a.insertCell(1);i.innerHTML=e.taskarray[n].title,i.classList.add("tb");let s=a.insertCell(2);s.innerHTML=e.taskarray[n].importance,s.classList.add("importance"),"High"==e.taskarray[n].importance?s.classList.add("task-high"):"Medium"==e.taskarray[n].importance?s.classList.add("task-medium"):"Low"==e.taskarray[n].importance&&s.classList.add("task-low");let l=a.insertCell(3);l.innerHTML=e.taskarray[n].dueDate,l.classList.add("cell");let r=document.createElement("img");r.classList.add("details");let d=a.insertCell();d.appendChild(r),d.classList.add("cell");let c=document.createElement("img");c.classList.add("edit-button");let o=a.insertCell();o.appendChild(c),o.classList.add("cell");let u=document.createElement("button"),m=document.createElement("img");m.src="src/bin.png",u.appendChild(m),u.classList.add("delete-button");let p=a.insertCell();p.appendChild(u),p.classList.add("cell")}}const a=document.querySelector(".project-list");function i(e){for(let t=document.querySelectorAll(".project-list div").length;t<e.length;t++){let n=document.createElement("div");n.innerText=e[t].title,n.classList.add("project_element"),n.setAttribute("data-index",t),a.appendChild(n);let i=document.createElement("button");i.innerText="X",i.classList.add("delete-button-project"),n.appendChild(i)}}function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function r(e){s(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===l(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function d(e){s(1,arguments);var t=r(e);return t.setHours(0,0,0,0),t}function c(e){return s(1,arguments),function(e,t){s(2,arguments);var n=d(e),a=d(t);return n.getTime()===a.getTime()}(e,Date.now())}var o={};function u(){return o}function m(e,t){var n,a,i,l,d,c,o,m;s(1,arguments);var p=u(),y=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null!==(a=null!==(i=null!==(l=null==t?void 0:t.weekStartsOn)&&void 0!==l?l:null==t||null===(d=t.locale)||void 0===d||null===(c=d.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==i?i:p.weekStartsOn)&&void 0!==a?a:null===(o=p.locale)||void 0===o||null===(m=o.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==n?n:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=r(e),k=v.getDay(),g=(k<y?7:0)+k-y;return v.setDate(v.getDate()-g),v.setHours(0,0,0,0),v}function p(e,t){return s(1,arguments),function(e,t,n){s(2,arguments);var a=m(e,n),i=m(t,n);return a.getTime()===i.getTime()}(e,Date.now(),t)}const y=document.querySelector(".open_menu"),v=document.querySelector(".menu"),k=document.querySelector(".main-place");y.addEventListener("click",(()=>{v.classList.toggle("open"),k.classList.toggle("open")})),function(){const e=document.querySelector(".content"),a=document.querySelector(".create-project");a.classList.add("addPage");const s=document.querySelector(".modal-project"),l=document.querySelector(".project-list"),d=document.querySelector(".close-modal-task"),o=document.querySelector(".close-modal-project"),u=document.querySelector(".main-place"),m=document.querySelector(".default"),y=document.querySelector(".form-project"),v=document.querySelector(".modal-task"),k=document.querySelector(".form-task"),g=document.querySelector("table");let L=document.createElement("div"),f=document.createElement("div");f.classList.add("project-header-place");const b=document.createElement("button");b.innerText="+",b.classList.add("addPage"),b.classList.add("addTaskButton"),L.appendChild(f),L.appendChild(b),L.classList.add("header-and-button"),u.appendChild(L),b.style.visibility="hidden",u.appendChild(g);let T=" ",h=!1;const S=document.querySelector(".add"),E=document.querySelector("#allTasks"),q=document.querySelector(".today"),w=document.querySelector(".thisWeek"),H=document.querySelector(".important");E.classList.add("active");let D=!1;const M=t("All tasks"),C=t("today"),N=t("This week"),j=t("important"),x=[];let I=M;function A(){s.style.display="none",y.reset(),e.classList.remove("blur")}function B(){v.style.display="none",e.classList.remove("blur"),k.reset(),h=!1}i(x),n(I),f.innerHTML="All Tasks",b.style.visibility="visible",m.addEventListener("click",(function(e){e.target.classList.contains("all")&&(f.innerHTML=" ",g.innerHTML=" ",b.style.visibility="visible",e.target==E||e.target.parentElement==E?(n(M),document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),E.classList.add("active"),f.innerHTML="All Tasks",I=M):e.target==q||e.target.parentElement==q?(n(C),b.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),q.classList.add("active"),f.innerHTML="Today",I=C):e.target==w||e.target.parentElement==w?(n(N),b.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),w.classList.add("active"),f.innerHTML="This week",I=N):e.target!=H&&e.target.parentElement!=H||(n(j),b.style.visibility="hidden",document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),H.classList.add("active"),f.innerHTML="Important",I=j))})),a.addEventListener("click",(()=>{s.style.display="block",e.classList.add("blur")})),o.addEventListener("click",A),s.addEventListener("submit",(e=>{e.preventDefault();const n=t(document.getElementById("title").value);x.push(n),n.id=x.indexOf(n),i(x),A()})),l.addEventListener("click",(function(e){if(e.target.classList.contains("delete-button-project")){const t=e.target.parentNode.getAttribute("data-index"),a=x.find((e=>e.id==t)),i=x.indexOf(a);for(let e=0;e<a.taskarray.length;e++){let t=a.taskarray[e];M.deleteTask(t),C.deleteTask(t),N.deleteTask(t),j.deleteTask(t)}I==a&&(f.innerHTML=" ",g.innerHTML=" ",f.innerHTML="All Tasks",I=M,E.classList.add("active"),n(I)),x.splice(i,1),e.target.parentNode.remove()}else if(e.target.classList.contains("project_element")){const t=e.target.getAttribute("data-index");f.innerHTML=" ",g.innerHTML=" ",document.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),I=x.find((e=>e.id==t)),f.innerText=I.title,b.style.visibility="visible",n(I)}})),b.addEventListener("click",(()=>{v.style.display="block",e.classList.add("blur")})),d.addEventListener("click",B),S.addEventListener("click",(e=>{if(e.preventDefault(),0==h){1==D&&S.removeEventListener("click",_);let e=document.getElementById("name").value,t=document.getElementById("description").value,a=document.getElementById("due-date").value,i=document.querySelector('input[name="importance"]:checked').value;const s={title:e,description:t,dueDate:a,importance:i};I.addTask(s),I!==M&&M.addTask(s);let l=r(new Date(a));c(l)&&C.addTask(s),p(l)&&N.addTask(s),"High"==i&&j.addTask(s),I.taskID(s),B(),n(I)}}));let O=document.createElement("div");function _(){let e=T.importance,t=r(new Date(T.dueDate));T.title=document.getElementById("name").value,T.description=document.getElementById("description").value,T.dueDate=document.getElementById("due-date").value,T.importance=document.querySelector('input[name="importance"]:checked').value;const n=I.taskarray.findIndex((e=>e.id==$));g.rows[n].cells[1].innerHTML=T.title,g.rows[n].cells[2].innerHTML=T.importance,g.rows[n].cells[3].innerHTML=T.dueDate;let a=r(new Date(T.dueDate));c(t)&&0==c(a)&&C.deleteTask(T),p(t)&&0==p(a)&&N.deleteTask(T),0==c(t)&&c(a)&&C.addTask(T),0==p(t)&&p(a)&&N.addTask(T),"High"==e&"High"!=T.importance&&j.deleteTask(T),"High"!=e&"High"==T.importance&&j.addTask(T);const i=g.rows[n].cells[2],s=i.classList;if(s.length>0){const e=s[s.length-1];i.classList.remove(e)}"High"==T.importance?i.classList.add("task-high"):"Medium"==T.importance?i.classList.add("task-medium"):"Low"==T.importance&&i.classList.add("task-low"),T.id=$,S.removeEventListener("click",P),h=!1,B()}O.classList.add="pop-up",u.appendChild(O),O.style.display="none",document.addEventListener("click",(function(e){if(e.target.classList.contains("popup__close")&&(O.style.display="none"),e.target.classList.contains("details")){const t=e.target.parentNode.parentNode.getAttribute("data-index");T=I.taskarray.find((e=>e.id==t)),function(e){O.style.display="block",O.innerHTML=`\n         <div class="popup">\n            <div class="popup__close">X</div>\n            <div class="popup__content">\n            \t<div class="popup title">${e.title}</div>\n            \t<div class="popup priority"><span>Priority: </span>${e.importance}</div>\n            \t<div class="popup due"><span>Due Date: </span>${e.dueDate}</div>\n            \t<div class="popup details"><span>Description: </span>${e.description}</div>\n            </div>\n        </div>\n         `}(T)}}));let P=null,$=" ";g.addEventListener("click",(e=>{e.target.classList.contains("edit-button")&&(h=!0,v.style.display="block",$=e.target.parentNode.parentNode.getAttribute("data-index"),console.log($),console.log(I.taskarray),T=I.taskarray.find((e=>e.id==$)),document.getElementById("name").value=T.title,document.getElementById("description").value=T.description,document.getElementById("due-date").value=T.dueDate,"High"==T.importance?document.formTask.importance[0].checked=!0:"Medium"==T.importance?document.formTask.importance[1].checked=!0:document.formTask.importance[2].checked=!0,P&&S.removeEventListener("click",P),P=()=>{_()},S.addEventListener("click",P),D=!0)})),g.addEventListener("click",(e=>{if(e.target.classList.contains("delete-button")){const t=e.target.parentNode.parentNode.getAttribute("data-index");T=I.taskarray.find((e=>e.id==t)),I.deleteTask(T),I!=M&&M.deleteTask(T),I!=C&&C.deleteTask(T),I!=N&&N.deleteTask(T),I!=j&&j.deleteTask(T),e.target.parentNode.parentNode.remove(),T=null}}))}()})();